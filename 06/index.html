<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Week 2: 2D Design and Cutting">
    <meta name="description" content="">
    <title>Page 6</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="Page-6.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 5.0.7, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i|Roboto+Slab:100,200,300,400,500,600,700,800,900">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/arduino-light.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/arduino.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script> 
    
    
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Page 6">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body u-xl-mode" data-lang="en"><header class="u-clearfix u-header u-palette-1-light-3 u-header" id="sec-d2da"><div class="u-clearfix u-sheet u-sheet-1">
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
          <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px; font-weight: 700; text-transform: uppercase;">
            <a class="u-button-style u-custom-active-border-color u-custom-active-color u-custom-border u-custom-border-color u-custom-borders u-custom-hover-border-color u-custom-hover-color u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-text-active-color u-custom-text-color u-custom-text-hover-color u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
              <svg class="u-svg-link" viewBox="0 0 24 24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use></svg>
              <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</g></svg>
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-spacing-30 u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90" href="../Home.html" style="padding: 10px 0px;">Home</a>
</li><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90" href="About.html" style="padding: 10px 0px;">About</a>
</li><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90" href="Contact.html" style="padding: 10px 0px;">Contact</a>
</li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html">About</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Contact.html">Contact</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
        <h3 class="u-custom-font u-font-roboto-slab u-text u-text-default u-text-1">PS70: Intro to Digital Fabrication</h3>
      </div></header>
    <section class="u-clearfix u-section-1" id="carousel_99a0">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h1 class="u-custom-font u-font-roboto-condensed u-text u-text-palette-1-light-2 u-text-1">Week 6: INPUT DEVICES&nbsp;</h1>
        <p class="u-align-left u-custom-font u-font-roboto-slab u-text u-text-2"><b></b><b>Sensors</b>
          <br>
          <br>This week we were tasked with programming sensors to detect different values. At first we had to choose one of the sensors available in the lab before building our own capacitive sensor. I decided to try out the ultrasonic sensor as I saw that Andre had used it in his project last week and thought that it looked really cool. To set up the sensor I just followed the instruction from&nbsp;<a href="https://create.arduino.cc/projecthub/abdularbi17/ultrasonic-sensor-hc-sr04-with-arduino-tutorial-327ff6" class="u-active-none u-border-none u-btn u-button-style u-hover-none u-none u-text-palette-1-base u-btn-1">this</a>&nbsp;example code.<br>
          <br>It had no problems running and picking up values so I decided to measure the distance of a block from the sensor at 1cm intervals. The results are shown below:<br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>This is almost a perfect linear relationship yay!<br>
          <br>We see from the linear equation that the values can be converted to distances by multiplying it by a factor and then adding roughly 22. This was strange for me to see at first as I would have expected the line to go through the origin. However when I played around with this and tried putting the block right up to the sensor it would read incredibly high values. I’m not sure if the calibration was just off or if the sensor simply couldn’t detect the object when it was that close and therefore measured an object extremely far away. It would be interesting to look into the smallest distance the sensor could reasonably pick up. <br>
          <br>
          <br>I wanted to see if I could account for this conversion in my Arduino code so that I would not have to plot this relationship and I could get the information directly from Serial Monitor. I googled that the ultrasonic sensor works by using sound waves which we can assume have a speed of 340 m/s in air. If we multiply this by the duration of the sound wave and divide the wavelength by two we get the distance of the sound wave to travel to the object and back. I was therefore able to directly measure for distance as shown in the code below. I imagine this would be harder or impossible to do for some more complex sensors such as pressure. <br>

          <pre><code>

duration = pulseIn(echo, HIGH);
distance = duration*0.034 / 2;
Serial.print("Distance: ");
Serial.println(distance);
//Get the sound wave reflection time and convert to cm and print on serial monitor.

}
</code></pre>



After completing this step I decided to remove the delay function in my code. This ended up taking some time and proved quite difficult for me. I had to create new variables to define my previous millies, intervals of time (delay) and trig state and echo state. Once I figured out how to properly embed things in if statements it seemed to work. The code is shown below:

<pre><code>

void loop()
{
  // check to see if it's time to change the state of the LED
  unsigned long currentMillis = millis();
  unsigned long previousMillis=0;
  int duration = 0; 
  int distance = 0;
 
  if((trig == LOW) && (currentMillis - previousMillis1 >= intervaloff))
  {
    digitalWrite(trig, LOW); // turn off trig pin
    previousMillis1 = currentMillis;  // Remember the time
    digitalWrite(trig, trigstate);  // Update the trig state
  }
  else if ((trig == HIGH) && (currentMillis - previousMillis1 >= intervalon))
  {
    digitalWrite(trig, HIGH);  // turn it on
    previousMillis1 = currentMillis;   // Remember the time
    digitalWrite(trig, trigstate);    // Update the actual trig state
  }

</code></pre>

          <br>Finally here is my circuit for the ultrasonic sensor. I didn’t use a breadboard so the set-up is fairly simply: <br>
          <br>&lt;div class = "center"&gt; <br> &lt;img src="../06/ultracircuit.png" <br> width ="400" height="500"/&gt; <br>&lt;/div&gt; <br>
          <br>
          <span style="font-weight: 700;">&nbsp;Capacitive sensor&nbsp;</span>
          <br>
          <br>For the capacitive sensor aspect of this week I wanted to explore ways in which I could further my final project plans. As a recap for my final project I hope to make a float switch sensor to detect when water levels are too low from our water source to switch of the pump. I would also like to make a turbidity sensor to evaluate if the filter is effectively working (at least with physical filtration).<br>
          <br>
          <br>
          <br>
          <span style="text-decoration: underline !important;">
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <span style="text-decoration: underline !important;"></span>
          </span>
          <br>The demo in class shows using capacitors with a plastic cup and varying water levels to establish a relationship with capacitance and water level. Using the same code from&nbsp; [class](https://nathanmelenbrink.github.io/ps70/06_input/index.html), I started off with this, adding water in 0.5 ml increments and got the following relationship:<br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <span style="font-weight: 700;">Final project discussion with Ibrahim&nbsp;<br>
          </span>
          <br>For section this week I also discussed my final project in more detail with Ibrahim. I decided to reframe my water pump project so that it would serve a purpose (i.e build upon previous models or provide something different). I decided that I wanted my water system to serve as a compact device with the ability to replace parts easily (i.e the filter, pump, sensor, etc.) if one broke. I also want this water system to serve as a cheap household intermediate as families are waiting on their community water system to be installed (which can take several months). <br>
          <br>We also discussed that I will need to make a prototype very soon of all of the working parts to make sure my system can work. Once this is established I can refine the components and make them look pretty. I should also incorporate work from this week and innovate on the pump design by having various input and output sensors. What seems most useful to me at the moment is to link the turbidity sensor to the filter so that it is activated based on that measurement and connect the motor of the pump to the float switch to prevent the pump from running dry. However I will also keep an open mind for different relevant inputs and outputs. Finally Ibrahim had a great idea to connect some of this information to a phone app via Bluetooth so that it can notify users when the water is running too low and/ or the turbidity is too high. <br>
          <br>
          <br>
        </p>
        <img class="u-image u-image-default u-image-1" src="images/ultrasonic.png" alt="" data-image-width="1653" data-image-height="993">
        <img class="u-image u-image-contain u-image-default u-image-2" src="images/capacitorcircuit.png" alt="" data-image-width="605" data-image-height="457">
        <img class="u-image u-image-default u-image-3" src="images/watersensor.png" alt="" data-image-width="1653" data-image-height="993">
      </div>
    </section>
    
    
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-3712"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">Layla Seaver - Environmental Engineering Harvard College '24</p>
      </div></footer>
    <section class="u-backlink u-clearfix u-grey-80">
      <a class="u-link" href="https://nicepage.com/templates" target="_blank">
        <span>Template</span>
      </a>
      <p class="u-text">
        <span>created with</span>
      </p>
      <a class="u-link" href="https://nicepage.com/html-website-builder" target="_blank">
        <span>HTML Website Builder</span>
      </a>. 
    </section>
  
</body></html>