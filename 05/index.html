<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Week 2: 2D Design and Cutting">
    <meta name="description" content="">
    <title>Page 1</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="Page-1.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 5.0.7, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i|Roboto+Slab:100,200,300,400,500,600,700,800,900">
    
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Page 1">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body u-xl-mode" data-lang="en"><header class="u-clearfix u-header u-palette-1-light-3 u-header" id="sec-d2da"><div class="u-clearfix u-sheet u-sheet-1">
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
          <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px; font-weight: 700; text-transform: uppercase;">
            <a class="u-button-style u-custom-active-border-color u-custom-active-color u-custom-border u-custom-border-color u-custom-borders u-custom-hover-border-color u-custom-hover-color u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-text-active-color u-custom-text-color u-custom-text-hover-color u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
              <svg class="u-svg-link" viewBox="0 0 24 24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use></svg>
              <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</g></svg>
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-spacing-30 u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90" href="Home.html" style="padding: 10px 0px;">Home</a>
</li><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90" href="About.html" style="padding: 10px 0px;">About</a>
</li><li class="u-nav-item"><a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90" href="Contact.html" style="padding: 10px 0px;">Contact</a>
</li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html">About</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Contact.html">Contact</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
        <h3 class="u-custom-font u-font-roboto-slab u-text u-text-default u-text-1">PS70: Intro to Digital Fabrication</h3>
      </div></header>
    <section class="u-clearfix u-section-1" id="carousel_99a0">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h1 class="u-custom-font u-font-roboto-condensed u-text u-text-palette-1-light-2 u-text-1">Week 5: Microcontroller programming</h1>
        <p class="u-align-left u-custom-font u-font-roboto-slab u-text u-text-2"><b></b>
          <span style="font-weight: 700;"><u>Microcontrollers</u>
          </span>
          <br>
          <br>This week we were tasked with programming the Arduino board to do something. I decided to build on my 3D printed pump from last week’s assignment and experiment with using sensors to control the speed of the pump.This would allow me to understand how I could eventually program my float switch to do the same thing with my final project.I also wanted to use what we had learnt in class about L9110 and experiment how I would use this together with a breadboard when powering a motor.<br>
          <br><u>Button component</u>
          <br>
          <br>I decided to first investigate with a button component that would change the direction of motion of my pump. This doesn’t provide much utility for me but I thought it would be a good starting point considering we went over the button function in class.<br>
          <br><u>Phototransistor sensor</u>
          <br>
          <br>My next goal was to program a phototransistor such that the pump sped up as more light was shone on it. I decided the most simple way to approach this would be to directly take the phototransistor sensor values and input that as motor speed.<br>
          <br><u>Constants</u>
          <br>
          <br>I started off by defining my constants as such:This time I needed 4 constants because I was including my L9110 A1A, A1B and the two pins for my button and sensor:<br>
          <br>This time I needed 4 constants because I was including my L9110 A1A, A1B and the two pins for my button and sensor: <br>
          <br>&lt;pre&gt;&lt;code&gt; <br>// constants won't change. They're used here to set pin numbers: <br>const int buttonPin = 8;     // the number of the pushbutton pin <br>const int sensorPin =  A0;      // the number of the sensor pin <br>const int A1A = 3;  // define pin 3 for A-1A (PWM Speed) <br>const int A1B = 4;  // define pin 4 for A-1B (direction) <br>
          <br>&lt;/code&gt;&lt;/pre&gt; <br>
          <br>I then created an initial point for my variables that will change: <br>
          <br>&lt;pre&gt;&lt;code&gt; <br>// variables will change: <br>int buttonState = 0; <br>int sensorfixed = 0; <br>int sensorState = 0;// variable for reading the pushbutton status <br>&lt;/pre&gt; &lt;/code&gt; <br>
          <br>
          <br>
          <br>I had to create two variables for sensor state, because I had to remap the values the sensor was picking up, and will go into more detail on this in the next section. <br>
          <br>Below is my void setup, taking what we learnt from class that direction should be digital while speed should be analog form: <br>
          <br>&lt;pre&gt;&lt;code&gt; <br>void setup() { <br> Serial.begin(9600); <br> pinMode(A1A, OUTPUT);     // specify these pins as outputs <br> pinMode(A1B, OUTPUT); <br> analogWrite(A1A, 0);   // start with the motors off <br> digitalWrite(A1B, LOW); <br> // initialize the sensor pin as an input: <br> pinMode(sensorPin, INPUT); <br> // initialize the pushbutton pin as an input: <br> pinMode(buttonPin, INPUT); <br>} <br>&lt;/code&gt;&lt;/pre&gt; <br>
          <br>
          <span style="text-decoration: underline !important;">Troubleshooting </span>
          <br>
          <br>At first, my button was not working. I would hold it down and instead of changing direction it would simply stop the motor. I realized that I forgot what we learnt in class that I had forgot to implement what we learnt in class and needed to invert the sensor state for one of my functions as shown below: <br>
          <br> &lt;pre&gt;&lt;code&gt;analogWrite(A1A, 255-sensorState) &lt;/code&gt;&lt;/pre&gt; <br>
          <br>Success! <br>
          <br>The phototransistor was really tricky since the motor was very sensitive to any power supplied by the Arduino. My first error was that I connected it in the wrong direction thinking that the transistor acts the same as a diode (when in reality it should be connected in the opposite direction). 55Kassia showed me about the “Serial.print” function to view the values I was getting from the phototransistor.  I realized that the max values were in the 500 range, with the highest observable max at 510. However the motor max is only at 255, so I thought this was also preventing the motor from detecting the differences in light if most values were already above 255. I used the map function and created a new variable “sensor” fixed. As shown below: <br>
          <br>&lt;pre&gt;&lt;code&gt; <br>sensorState = analogRead(sensorPin)/2; <br>buttonState = digitalRead(buttonPin); <br>Serial.println(sensorState); <br>
          <br>sensorfixed = map(sensorState, 1, 510, 0, 255); <br> if (buttonState==HIGH){ <br> digitalWrite(A1B, HIGH); <br> analogWrite(A1A, 255-sensorState);   // Speed to match photosensor <br>
          <br> }else{ <br> digitalWrite(A1B, LOW); <br> analogWrite(A1A, sensorState);   // Speed to match photosensor <br>&lt;/code&gt; &lt;/pre&gt; <br>
          <br>
          <br>Success! <br>
          <br>Finally it should be notes that at first my phototransistor code was included outside of my if, else statement but I realized that it needed to be embedded within the if else statement because of the inverted speeds that I had mentioned above. This exercise also helped cement my understanding of analog and digital and which to use for each function. Originally, I had used digital mode for everything and this was also interfering with my pump. <br>
          <br>Here is my circuit from the breadboard: <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>I didn’t get to experiment with replacing delay function with millis since there wasn’t any need for delays in my function, but I will be experimenting with this next week! <br>
          <br>
          <span style="text-decoration: underline !important;">Final product:</span>
          <br>
          <br>
          <span style="text-decoration: underline !important;">
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
          </span>
          <span style="font-weight: 700;"></span>
          <br>
          <br>
        </p>
        <img class="u-image u-image-default u-image-1" src="images/circuit.png" alt="" data-image-width="539" data-image-height="439">
      </div>
    </section>
    <section class="u-clearfix u-grey-10 u-section-2" id="sec-1b4c">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-clearfix u-gutter-30 u-layout-wrap u-layout-wrap-1">
          <div class="u-layout">
            <div class="u-layout-row">
              <div class="u-align-left u-container-style u-layout-cell u-left-cell u-size-30 u-layout-cell-1">
                <div class="u-container-layout u-container-layout-1">
                  <div class="u-align-left u-expanded u-uploaded-video u-video">
                    <div class="embed-responsive">
                      <video class="embed-responsive-item">
                        <source src="files/vid2.mp4" type="video/mp4">
                        <p>Your browser does not support HTML5 video.</p>
                      </video>
                      <button class="u-video-poster"></button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="u-align-left u-container-style u-layout-cell u-size-30 u-layout-cell-2">
                <div class="u-container-layout u-container-layout-2">
                  <div class="u-align-left u-expanded u-video">
                    <div class="embed-responsive embed-responsive-2">
                      <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;" class="embed-responsive-item" src="https://www.youtube.com/embed/L-hm3S1aSnI?mute=0&amp;showinfo=0&amp;controls=0&amp;start=0" frameborder="0" allowfullscreen=""></iframe>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-3712"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">Layla Seaver - Environmental Engineering Harvard College '24</p>
      </div></footer>
    <section class="u-backlink u-clearfix u-grey-80">
      <a class="u-link" href="https://nicepage.com/templates" target="_blank">
        <span>Template</span>
      </a>
      <p class="u-text">
        <span>created with</span>
      </p>
      <a class="u-link" href="https://nicepage.com/html-website-builder" target="_blank">
        <span>HTML Website Builder</span>
      </a>. 
    </section>
  
</body></html>